# type: SendEvent
# spec:
#   eventName: CEventVideoInitConnectionRequest
#   params:
#   - field: roomID
#     constant: "1213"
#     type: Int32
#   - field: uid.channel
#     constant: "VCT_X5"
#     type: Symbol
# include_headers:
# - video_platform_impl/user_proxy/event/room_proxy_events.h

# ---
# type: RecvEvent
# spec:
#   eventName: CEventVideoInitConnectionResponse
# include_headers:
# - video_platform_impl/user_proxy/event/room_proxy_events.h

---
class: Action
order: SendRecvEvent
spec:
  send:
    eventRef: CEventVideoInitConnectionRequest
  recv:
    eventRefs:
    - CEventVideoInitConnectionResponse

---
class: Event
order: Request
metadata:
  include_headers:
  - video_platform_impl/user_proxy/event/room_proxy_events.h
spec:
  eventName: CEventVideoInitConnectionRequest
  params:
  - field: roomID
    constant: "191"
    type: Int32
  - field: uid.account
    constant: "boost::lexical_cast<long long>(request.connectionid().account())"
    type: Expression
  - field: uid.zoneid
    fromPlayerData: "ROOM_ID"
    type: Int32
  - field: uid.channel
    constant: "VCT_X5"
    type: Symbol
  - field: logic_version
    constant: "VIDEO_LOGIC_VERSION_NUM_CURRENT"
    type: Symbol

---
class: Event
order: Response
metadata:
  include_headers:
  - video_platform_impl/user_proxy/event/room_proxy_events.h
spec:
  eventName: CEventVideoInitConnectionResponse
  errorCodeField: res
  errorCategory: UserProxyResult
  results:
  - field: video_zone_id